{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "1.2",
  "description": "Navigation property definitions for JOIN resolution. When localKey/foreignKey are omitted they default to '{NavPropName}_Id' and 'Id' respectively.",
  "navigationProperties": {

    "AssignedSingleRole": {
      "Role":             { "targetTable": "[dbo].[UP_SingleRoles]",       "targetEntity": "SingleRole"       },
      "WorkflowInstance": { "targetTable": "[dbo].[UW_WorkflowInstances]", "targetEntity": "WorkflowInstance" },
      "Owner":            { "targetTable": "[dbo].[UR_Resources]",         "targetEntity": "Resource"         },
      "ParametersContext":{ "targetTable": "[dbo].[UP_Contexts]",          "targetEntity": "Context"          }
    },

    "AssignedCompositeRole": {
      "Role":             { "targetTable": "[dbo].[UP_CompositeRoles]",    "targetEntity": "CompositeRole"    },
      "WorkflowInstance": { "targetTable": "[dbo].[UW_WorkflowInstances]", "targetEntity": "WorkflowInstance" },
      "Owner":            { "targetTable": "[dbo].[UR_Resources]",         "targetEntity": "Resource"         },
      "ParametersContext":{ "targetTable": "[dbo].[UP_Contexts]",          "targetEntity": "Context"          }
    },

    "AssignedResourceType": {
      "Role":             { "targetTable": "[dbo].[UP_ResourceTypes]",     "targetEntity": "ResourceType"     },
      "WorkflowInstance": { "targetTable": "[dbo].[UW_WorkflowInstances]", "targetEntity": "WorkflowInstance" },
      "Owner":            { "targetTable": "[dbo].[UR_Resources]",         "targetEntity": "Resource"         },
      "ParametersContext":{ "targetTable": "[dbo].[UP_Contexts]",          "targetEntity": "Context"          }
    },

    "UserActivityInstance": {
      "Activity":         { "targetTable": "[dbo].[UW_Activities]",        "targetEntity": "Activity"         },
      "WorkflowInstance": { "targetTable": "[dbo].[UW_WorkflowInstances]", "targetEntity": "WorkflowInstance" },
      "AssignedTo":       { "targetTable": "[dbo].[UR_Resources]",         "targetEntity": "Resource"         },
      "Performer":        { "targetTable": "[dbo].[UR_Resources]",         "targetEntity": "Resource"         }
    },

    "WorkflowInstance": {
      "Workflow":              { "targetTable": "[dbo].[UW_Workflows]",             "targetEntity": "Workflow"            },
      "CurrentActivity":       { "targetTable": "[dbo].[UW_Activities]",            "targetEntity": "Activity"            },
      "ActivityInstances":     { "targetTable": "[dbo].[UW_ActivityInstances]",     "targetEntity": "UserActivityInstance", "localKey": "Id", "foreignKey": "WorkflowInstance_Id" },
      "AssignedSingleRoles":   { "targetTable": "[dbo].[UP_AssignedSingleRoles]",   "targetEntity": "AssignedSingleRole",   "localKey": "Id", "foreignKey": "WorkflowInstance_Id" },
      "AssignedCompositeRoles":{ "targetTable": "[dbo].[UP_AssignedCompositeRoles]","targetEntity": "AssignedCompositeRole","localKey": "Id", "foreignKey": "WorkflowInstance_Id" },
      "AssignedResourceTypes": { "targetTable": "[dbo].[UP_AssignedResourceTypes]", "targetEntity": "AssignedResourceType", "localKey": "Id", "foreignKey": "WorkflowInstance_Id" },
      "Directory_FR_User":          { "targetTable": "[dbo].[UR_Resources]", "targetEntity": "Resource", "localKey": "Owner_Id" },
      "Workflow_Directory_FR_User": { "targetTable": "[dbo].[UR_Resources]", "targetEntity": "Resource", "localKey": "Owner_Id" }
    },

    "Workflow": {
      "Activities": { "targetTable": "[dbo].[UW_Activities]", "targetEntity": "Activity", "localKey": "Id", "foreignKey": "Workflow_Id" }
    },

    "SingleRole": {
      "Policy": { "targetTable": "[dbo].[UP_Policies]", "targetEntity": "Policy" }
    },

    "CompositeRole": {
      "Policy": { "targetTable": "[dbo].[UP_Policies]", "targetEntity": "Policy" }
    },

    "Policy": {
      "SimulationPolicy":  { "targetTable": "[dbo].[UP_PolicySimulations]", "targetEntity": "SimulationPolicy", "localKey": "PolicySimulation_Id"   },
      "ProvisioningPolicy":{ "targetTable": "[dbo].[UP_Policies]",          "targetEntity": "Policy",           "localKey": "PolicyProvisioning_Id" }
    },

    "CompositeRoleRule": {
      "Role":       { "targetTable": "[dbo].[UP_CompositeRoles]", "targetEntity": "CompositeRole" },
      "Policy":     { "targetTable": "[dbo].[UP_Policies]",       "targetEntity": "Policy"        },
      "ParentRole": { "targetTable": "[dbo].[UP_CompositeRoles]", "targetEntity": "CompositeRole" },
      "CreatedBy":  { "targetTable": "[dbo].[UR_Resources]",      "targetEntity": "Resource"      },
      "ChangedBy":  { "targetTable": "[dbo].[UR_Resources]",      "targetEntity": "Resource"      }
    },

    "SingleRoleRule": {
      "Role":   { "targetTable": "[dbo].[UP_SingleRoles]", "targetEntity": "SingleRole" },
      "Policy": { "targetTable": "[dbo].[UP_Policies]",    "targetEntity": "Policy"     }
    },

    "ResourceClassificationRule": {
      "ResourceType": { "targetTable": "[dbo].[UP_ResourceTypes]", "targetEntity": "ResourceType" }
    },

    "ResourceCorrelationRule": {
      "SourceBinding":  { "targetTable": "[dbo].[UM_Bindings]",     "targetEntity": "Binding"      },
      "TargetBinding":  { "targetTable": "[dbo].[UM_Bindings]",     "targetEntity": "Binding"      },
      "ResourceType":   { "targetTable": "[dbo].[UP_ResourceTypes]","targetEntity": "ResourceType" },
      "Policy":         { "targetTable": "[dbo].[UP_Policies]",     "targetEntity": "Policy"       }
    },

    "ResourceNavigationRule": {
      "Property":     { "targetTable": "[dbo].[UM_EntityProperties]", "targetEntity": "Property"     },
      "Resource":     { "targetTable": "[dbo].[UR_Resources]",        "targetEntity": "Resource"     },
      "SingleRole":   { "targetTable": "[dbo].[UP_SingleRoles]",      "targetEntity": "SingleRole"   },
      "ResourceType": { "targetTable": "[dbo].[UP_ResourceTypes]",    "targetEntity": "ResourceType" },
      "Policy":       { "targetTable": "[dbo].[UP_Policies]",         "targetEntity": "Policy"       }
    },

    "ResourceQueryRule": {
      "Property":      { "targetTable": "[dbo].[UM_EntityProperties]", "targetEntity": "Property"     },
      "ResourceType":  { "targetTable": "[dbo].[UP_ResourceTypes]",    "targetEntity": "ResourceType" },
      "SourceBinding": { "targetTable": "[dbo].[UM_Bindings]",         "targetEntity": "Binding"      },
      "TargetBinding": { "targetTable": "[dbo].[UM_Bindings]",         "targetEntity": "Binding"      },
      "Policy":        { "targetTable": "[dbo].[UP_Policies]",         "targetEntity": "Policy"       }
    },

    "ResourceTypeRule": {
      "Role":       { "targetTable": "[dbo].[UP_ResourceTypes]", "targetEntity": "ResourceType" },
      "SingleRole": { "targetTable": "[dbo].[UP_SingleRoles]",   "targetEntity": "SingleRole"   },
      "Policy":     { "targetTable": "[dbo].[UP_Policies]",      "targetEntity": "Policy"       }
    },

    "AutomationRule": {
      "CompositeRole": { "targetTable": "[dbo].[UP_CompositeRoles]", "targetEntity": "CompositeRole" },
      "SingleRole":    { "targetTable": "[dbo].[UP_SingleRoles]",    "targetEntity": "SingleRole"    },
      "ResourceType":  { "targetTable": "[dbo].[UP_ResourceTypes]",  "targetEntity": "ResourceType"  },
      "Category":      { "targetTable": "[dbo].[UP_Categories]",     "targetEntity": "Category"      },
      "Policy":        { "targetTable": "[dbo].[UP_Policies]",       "targetEntity": "Policy"        }
    },

    "RoleMapping": {
      "ResourceType":      { "targetTable": "[dbo].[UP_ResourceTypes]",    "targetEntity": "ResourceType" },
      "Property":          { "targetTable": "[dbo].[UM_EntityProperties]", "targetEntity": "Property"     },
      "IdentifierBinding": { "targetTable": "[dbo].[UM_Bindings]",         "targetEntity": "Binding"      },
      "DisplayNameBinding":{ "targetTable": "[dbo].[UM_Bindings]",         "targetEntity": "Binding"      },
      "Policy":            { "targetTable": "[dbo].[UP_Policies]",         "targetEntity": "Policy"       }
    },

    "ResourceType": {
      "Category":               { "targetTable": "[dbo].[UP_Categories]",              "targetEntity": "Category"              },
      "SecondaryCategories":    { "targetTable": "[dbo].[UP_ResourceTypesCategories]", "targetEntity": "ResourceTypesCategory", "localKey": "Id", "foreignKey": "ResourceType_Id" },
      "SourceEntityType":       { "targetTable": "[dbo].[UM_EntityTypes]",             "targetEntity": "EntityType"            },
      "TargetEntityType":       { "targetTable": "[dbo].[UM_EntityTypes]",             "targetEntity": "EntityType"            },
      "DependsOn":              { "targetTable": "[dbo].[UP_ResourceTypes]",           "targetEntity": "ResourceType"          },
      "DependsOnOwnerProperty": { "targetTable": "[dbo].[UM_EntityProperties]",        "targetEntity": "Property"              },
      "Policy":                 { "targetTable": "[dbo].[UP_Policies]",                "targetEntity": "Policy"                }
    },

    "Job": {
      "Agent":           { "targetTable": "[dbo].[UC_Agents]",       "targetEntity": "Agent"       },
      "LastJobInstance": { "targetTable": "[dbo].[UJ_JobInstances]", "targetEntity": "JobInstance" }
    },

    "JobInstance": {
      "Job":  { "targetTable": "[dbo].[UJ_Jobs]",      "targetEntity": "Job"      },
      "User": { "targetTable": "[dbo].[UR_Resources]", "targetEntity": "Resource" }
    },

    "Connector": {
      "Agent":             { "targetTable": "[dbo].[UC_Agents]",            "targetEntity": "Agent"             },
      "Connections":       { "targetTable": "[dbo].[UC_Connections]",       "targetEntity": "Connection",       "localKey": "Id", "foreignKey": "Connector_Id" },
      "EntityTypeMappings":{ "targetTable": "[dbo].[UC_EntityTypeMappings]","targetEntity": "EntityTypeMapping","localKey": "Id", "foreignKey": "Connector_Id" }
    },

    "Connection": {
      "Package": { "targetTable": "[dbo].[UC_Packages]", "targetEntity": "Package" }
    },

    "EntityTypeMapping": {
      "Connector":  { "targetTable": "[dbo].[UC_Connectors]",  "targetEntity": "Connector"  },
      "EntityType": { "targetTable": "[dbo].[UM_EntityTypes]", "targetEntity": "EntityType" }
    }
  }
}
