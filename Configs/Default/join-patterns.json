{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "1.1",
  "description": "Navigation property definitions for JOIN resolution. localKey/foreignKey use the actual DB column names (Entity_Id convention).",
  "navigationProperties": {

    "AssignedSingleRole": {
      "Role":             { "targetTable": "[dbo].[UP_SingleRoles]",       "targetEntity": "SingleRole",       "localKey": "Role_Id",              "foreignKey": "Id" },
      "WorkflowInstance": { "targetTable": "[dbo].[UW_WorkflowInstances]", "targetEntity": "WorkflowInstance", "localKey": "WorkflowInstance_Id",  "foreignKey": "Id" },
      "Owner":            { "targetTable": "[dbo].[UR_Resources]",         "targetEntity": "Resource",         "localKey": "Owner_Id",             "foreignKey": "Id" },
      "ParametersContext":{ "targetTable": "[dbo].[UP_Contexts]",          "targetEntity": "Context",          "localKey": "ParametersContext_Id", "foreignKey": "Id" }
    },

    "AssignedCompositeRole": {
      "Role":             { "targetTable": "[dbo].[UP_CompositeRoles]",    "targetEntity": "CompositeRole",    "localKey": "Role_Id",              "foreignKey": "Id" },
      "WorkflowInstance": { "targetTable": "[dbo].[UW_WorkflowInstances]", "targetEntity": "WorkflowInstance", "localKey": "WorkflowInstance_Id",  "foreignKey": "Id" },
      "Owner":            { "targetTable": "[dbo].[UR_Resources]",         "targetEntity": "Resource",         "localKey": "Owner_Id",             "foreignKey": "Id" },
      "ParametersContext":{ "targetTable": "[dbo].[UP_Contexts]",          "targetEntity": "Context",          "localKey": "ParametersContext_Id", "foreignKey": "Id" }
    },

    "AssignedResourceType": {
      "Role":             { "targetTable": "[dbo].[UP_ResourceTypes]",     "targetEntity": "ResourceType",     "localKey": "Role_Id",              "foreignKey": "Id" },
      "WorkflowInstance": { "targetTable": "[dbo].[UW_WorkflowInstances]", "targetEntity": "WorkflowInstance", "localKey": "WorkflowInstance_Id",  "foreignKey": "Id" },
      "Owner":            { "targetTable": "[dbo].[UR_Resources]",         "targetEntity": "Resource",         "localKey": "Owner_Id",             "foreignKey": "Id" },
      "ParametersContext":{ "targetTable": "[dbo].[UP_Contexts]",          "targetEntity": "Context",          "localKey": "ParametersContext_Id", "foreignKey": "Id" }
    },

    "UserActivityInstance": {
      "Activity":         { "targetTable": "[dbo].[UW_Activities]",       "targetEntity": "Activity",         "localKey": "Activity_Id",        "foreignKey": "Id" },
      "WorkflowInstance": { "targetTable": "[dbo].[UW_WorkflowInstances]","targetEntity": "WorkflowInstance", "localKey": "WorkflowInstance_Id","foreignKey": "Id" },
      "AssignedTo":       { "targetTable": "[dbo].[UR_Resources]",        "targetEntity": "Resource",         "localKey": "AssignedTo_Id",      "foreignKey": "Id" },
      "Performer":        { "targetTable": "[dbo].[UR_Resources]",        "targetEntity": "Resource",         "localKey": "Performer_Id",       "foreignKey": "Id" }
    },

    "WorkflowInstance": {
      "Workflow":              { "targetTable": "[dbo].[UW_Workflows]",           "targetEntity": "Workflow",            "localKey": "Workflow_Id",          "foreignKey": "Id" },
      "CurrentActivity":       { "targetTable": "[dbo].[UW_Activities]",          "targetEntity": "Activity",            "localKey": "CurrentActivity_Id",   "foreignKey": "Id" },
      "ActivityInstances":     { "targetTable": "[dbo].[UW_ActivityInstances]",   "targetEntity": "UserActivityInstance","localKey": "Id",                   "foreignKey": "WorkflowInstance_Id" },
      "AssignedSingleRoles":   { "targetTable": "[dbo].[UP_AssignedSingleRoles]", "targetEntity": "AssignedSingleRole",  "localKey": "Id",                   "foreignKey": "WorkflowInstance_Id" },
      "AssignedCompositeRoles":{ "targetTable": "[dbo].[UP_AssignedCompositeRoles]","targetEntity": "AssignedCompositeRole","localKey": "Id",                 "foreignKey": "WorkflowInstance_Id" },
      "AssignedResourceTypes": { "targetTable": "[dbo].[UP_AssignedResourceTypes]","targetEntity": "AssignedResourceType", "localKey": "Id",                  "foreignKey": "WorkflowInstance_Id" },
      "Directory_FR_User":     { "targetTable": "[dbo].[UR_Resources]",           "targetEntity": "Resource",            "localKey": "Owner_Id",             "foreignKey": "Id" },
      "Workflow_Directory_FR_User": { "targetTable": "[dbo].[UR_Resources]",      "targetEntity": "Resource",            "localKey": "Owner_Id",             "foreignKey": "Id" }
    },

    "Workflow": {
      "Activities": { "targetTable": "[dbo].[UW_Activities]", "targetEntity": "Activity", "localKey": "Id", "foreignKey": "Workflow_Id" }
    },

    "SingleRole": {
      "Policy": { "targetTable": "[dbo].[UP_Policies]", "targetEntity": "Policy", "localKey": "Policy_Id", "foreignKey": "Id" }
    },

    "CompositeRole": {
      "Policy": { "targetTable": "[dbo].[UP_Policies]", "targetEntity": "Policy", "localKey": "Policy_Id", "foreignKey": "Id" }
    },

    "Policy": {
      "SimulationPolicy":  { "targetTable": "[dbo].[UP_PolicySimulations]", "targetEntity": "SimulationPolicy", "localKey": "PolicySimulation_Id",  "foreignKey": "Id" },
      "ProvisioningPolicy":{ "targetTable": "[dbo].[UP_Policies]",          "targetEntity": "Policy",           "localKey": "PolicyProvisioning_Id","foreignKey": "Id" }
    },

    "CompositeRoleRule": {
      "Role":       { "targetTable": "[dbo].[UP_CompositeRoles]", "targetEntity": "CompositeRole", "localKey": "Role_Id",       "foreignKey": "Id" },
      "Policy":     { "targetTable": "[dbo].[UP_Policies]",       "targetEntity": "Policy",        "localKey": "Policy_Id",     "foreignKey": "Id" },
      "ParentRole": { "targetTable": "[dbo].[UP_CompositeRoles]", "targetEntity": "CompositeRole", "localKey": "ParentRole_Id", "foreignKey": "Id" },
      "CreatedBy":  { "targetTable": "[dbo].[UR_Resources]",      "targetEntity": "Resource",      "localKey": "CreatedBy_Id",  "foreignKey": "Id" },
      "ChangedBy":  { "targetTable": "[dbo].[UR_Resources]",      "targetEntity": "Resource",      "localKey": "ChangedBy_Id",  "foreignKey": "Id" }
    },

    "SingleRoleRule": {
      "Role":   { "targetTable": "[dbo].[UP_SingleRoles]", "targetEntity": "SingleRole", "localKey": "Role_Id",   "foreignKey": "Id" },
      "Policy": { "targetTable": "[dbo].[UP_Policies]",    "targetEntity": "Policy",     "localKey": "Policy_Id", "foreignKey": "Id" }
    },

    "ResourceClassificationRule": {
      "ResourceType": { "targetTable": "[dbo].[UP_ResourceTypes]", "targetEntity": "ResourceType", "localKey": "ResourceType_Id", "foreignKey": "Id" }
    },

    "ResourceCorrelationRule": {
      "SourceBinding":  { "targetTable": "[dbo].[UM_Bindings]",    "targetEntity": "Binding",      "localKey": "SourceBinding_Id",  "foreignKey": "Id" },
      "TargetBinding":  { "targetTable": "[dbo].[UM_Bindings]",    "targetEntity": "Binding",      "localKey": "TargetBinding_Id",  "foreignKey": "Id" },
      "ResourceType":   { "targetTable": "[dbo].[UP_ResourceTypes]","targetEntity": "ResourceType", "localKey": "ResourceType_Id",   "foreignKey": "Id" },
      "Policy":         { "targetTable": "[dbo].[UP_Policies]",    "targetEntity": "Policy",       "localKey": "Policy_Id",         "foreignKey": "Id" }
    },

    "ResourceNavigationRule": {
      "Property":     { "targetTable": "[dbo].[UM_EntityProperties]", "targetEntity": "Property",     "localKey": "Property_Id",     "foreignKey": "Id" },
      "Resource":     { "targetTable": "[dbo].[UR_Resources]",        "targetEntity": "Resource",     "localKey": "Resource_Id",     "foreignKey": "Id" },
      "SingleRole":   { "targetTable": "[dbo].[UP_SingleRoles]",      "targetEntity": "SingleRole",   "localKey": "SingleRole_Id",   "foreignKey": "Id" },
      "ResourceType": { "targetTable": "[dbo].[UP_ResourceTypes]",    "targetEntity": "ResourceType", "localKey": "ResourceType_Id", "foreignKey": "Id" },
      "Policy":       { "targetTable": "[dbo].[UP_Policies]",         "targetEntity": "Policy",       "localKey": "Policy_Id",       "foreignKey": "Id" }
    },

    "ResourceQueryRule": {
      "Property":       { "targetTable": "[dbo].[UM_EntityProperties]", "targetEntity": "Property",     "localKey": "Property_Id",       "foreignKey": "Id" },
      "ResourceType":   { "targetTable": "[dbo].[UP_ResourceTypes]",    "targetEntity": "ResourceType", "localKey": "ResourceType_Id",   "foreignKey": "Id" },
      "SourceBinding":  { "targetTable": "[dbo].[UM_Bindings]",         "targetEntity": "Binding",      "localKey": "SourceBinding_Id",  "foreignKey": "Id" },
      "TargetBinding":  { "targetTable": "[dbo].[UM_Bindings]",         "targetEntity": "Binding",      "localKey": "TargetBinding_Id",  "foreignKey": "Id" },
      "Policy":         { "targetTable": "[dbo].[UP_Policies]",         "targetEntity": "Policy",       "localKey": "Policy_Id",         "foreignKey": "Id" }
    },

    "ResourceTypeRule": {
      "Role":       { "targetTable": "[dbo].[UP_ResourceTypes]", "targetEntity": "ResourceType", "localKey": "Role_Id",       "foreignKey": "Id" },
      "SingleRole": { "targetTable": "[dbo].[UP_SingleRoles]",   "targetEntity": "SingleRole",   "localKey": "SingleRole_Id", "foreignKey": "Id" },
      "Policy":     { "targetTable": "[dbo].[UP_Policies]",      "targetEntity": "Policy",       "localKey": "Policy_Id",     "foreignKey": "Id" }
    },

    "AutomationRule": {
      "CompositeRole": { "targetTable": "[dbo].[UP_CompositeRoles]", "targetEntity": "CompositeRole", "localKey": "CompositeRole_Id", "foreignKey": "Id" },
      "SingleRole":    { "targetTable": "[dbo].[UP_SingleRoles]",    "targetEntity": "SingleRole",    "localKey": "SingleRole_Id",    "foreignKey": "Id" },
      "ResourceType":  { "targetTable": "[dbo].[UP_ResourceTypes]",  "targetEntity": "ResourceType",  "localKey": "ResourceType_Id",  "foreignKey": "Id" },
      "Category":      { "targetTable": "[dbo].[UP_Categories]",     "targetEntity": "Category",      "localKey": "Category_Id",      "foreignKey": "Id" },
      "Policy":        { "targetTable": "[dbo].[UP_Policies]",       "targetEntity": "Policy",        "localKey": "Policy_Id",        "foreignKey": "Id" }
    },

    "RoleMapping": {
      "ResourceType":      { "targetTable": "[dbo].[UP_ResourceTypes]",    "targetEntity": "ResourceType", "localKey": "ResourceType_Id",       "foreignKey": "Id" },
      "Property":          { "targetTable": "[dbo].[UM_EntityProperties]", "targetEntity": "Property",     "localKey": "Property_Id",           "foreignKey": "Id" },
      "IdentifierBinding": { "targetTable": "[dbo].[UM_Bindings]",         "targetEntity": "Binding",      "localKey": "IdentifierBinding_Id",  "foreignKey": "Id" },
      "DisplayNameBinding":{ "targetTable": "[dbo].[UM_Bindings]",         "targetEntity": "Binding",      "localKey": "DisplayNameBinding_Id", "foreignKey": "Id" },
      "Policy":            { "targetTable": "[dbo].[UP_Policies]",         "targetEntity": "Policy",       "localKey": "Policy_Id",             "foreignKey": "Id" }
    },

    "ResourceType": {
      "Category":               { "targetTable": "[dbo].[UP_Categories]",              "targetEntity": "Category",            "localKey": "Category_Id",               "foreignKey": "Id" },
      "SecondaryCategories":    { "targetTable": "[dbo].[UP_ResourceTypesCategories]", "targetEntity": "ResourceTypesCategory","localKey": "Id",                        "foreignKey": "ResourceType_Id" },
      "SourceEntityType":       { "targetTable": "[dbo].[UM_EntityTypes]",             "targetEntity": "EntityType",          "localKey": "SourceEntityType_Id",       "foreignKey": "Id" },
      "TargetEntityType":       { "targetTable": "[dbo].[UM_EntityTypes]",             "targetEntity": "EntityType",          "localKey": "TargetEntityType_Id",       "foreignKey": "Id" },
      "DependsOn":              { "targetTable": "[dbo].[UP_ResourceTypes]",           "targetEntity": "ResourceType",        "localKey": "DependsOn_Id",              "foreignKey": "Id" },
      "DependsOnOwnerProperty": { "targetTable": "[dbo].[UM_EntityProperties]",        "targetEntity": "Property",            "localKey": "DependsOnOwnerProperty_Id", "foreignKey": "Id" },
      "Policy":                 { "targetTable": "[dbo].[UP_Policies]",                "targetEntity": "Policy",              "localKey": "Policy_Id",                 "foreignKey": "Id" }
    },

    "Resource": {
      "ResourceAssignedResourceTypes": { "targetTable": "[dbo].[UP_AssignedResourceTypes]", "targetEntity": "AssignedResourceType", "localKey": "Id", "foreignKey": "Resource_Id" },
      "PresenceState": { "targetTable": "[dbo].[UR_Resources]", "targetEntity": "Resource", "localKey": "Op_PresenceState_Id", "foreignKey": "Id" },
      "MainRecord":    { "targetTable": "[dbo].[UR_Resources]", "targetEntity": "Resource", "localKey": "Id",                  "foreignKey": "Id" }
    },

    "Job": {
      "Agent":           { "targetTable": "[dbo].[UC_Agents]",       "targetEntity": "Agent",       "localKey": "Agent_Id",           "foreignKey": "Id" },
      "LastJobInstance": { "targetTable": "[dbo].[UJ_JobInstances]", "targetEntity": "JobInstance", "localKey": "LastJobInstance_Id", "foreignKey": "Id" }
    },

    "JobInstance": {
      "Job":  { "targetTable": "[dbo].[UJ_Jobs]",     "targetEntity": "Job",      "localKey": "Job_Id",  "foreignKey": "Id" },
      "User": { "targetTable": "[dbo].[UR_Resources]","targetEntity": "Resource", "localKey": "User_Id", "foreignKey": "Id" }
    },

    "Connector": {
      "Agent":             { "targetTable": "[dbo].[UC_Agents]",           "targetEntity": "Agent",          "localKey": "Agent_Id",    "foreignKey": "Id" },
      "Connections":       { "targetTable": "[dbo].[UC_Connections]",      "targetEntity": "Connection",     "localKey": "Id",          "foreignKey": "Connector_Id" },
      "EntityTypeMappings":{ "targetTable": "[dbo].[UC_EntityTypeMappings]","targetEntity": "EntityTypeMapping","localKey": "Id",         "foreignKey": "Connector_Id" }
    },

    "Connection": {
      "Package": { "targetTable": "[dbo].[UC_Packages]", "targetEntity": "Package", "localKey": "Package_Id", "foreignKey": "Id" }
    },

    "EntityTypeMapping": {
      "Connector":  { "targetTable": "[dbo].[UC_Connectors]",  "targetEntity": "Connector",  "localKey": "Connector_Id",  "foreignKey": "Id" },
      "EntityType": { "targetTable": "[dbo].[UM_EntityTypes]", "targetEntity": "EntityType", "localKey": "EntityType_Id", "foreignKey": "Id" }
    }
  }
}
